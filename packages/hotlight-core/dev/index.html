<html>
  <head>
    <title>Hotlight Dev</title>

    <style>
      :root {
        --hl-text-color: rgba(255, 255, 255, 70%);
      }
    </style>

    <script type="module">
      /*
      const t = document.createElement("template");
      t.setAttribute("id", "hotlight-action");
      t.innerHTML = "<div class='a'><a href='#'>hit</a></div>";
      document.body.appendChild(t);
      */
      const actions = [
        { title: "Home", trigger: "/" },
        { title: "About", trigger: () => "/about" }
      ]
      const source = () => {
        return actions;
      }

      const remoteActions = [
        { title: "Installing Hotlight", trigger: "/" },
        { title: "Getting started", trigger: () => "/" },
        { title: "Hotlight React", trigger: () => "/" },
        { title: "Hotlight Svelte", trigger: () => "/" },
        { title: "Go to a website", trigger: () => "https://jonas.arnklint.com" },
        { title: "Reload Window", trigger: () => location.reload() },
        { title: "Close Hotlight", trigger: ({ close }) => close() },
        { title: "Slow trigger", trigger: async () => await new Promise((resolve) => setTimeout(() => resolve("#slow"), 1000)) },
        { title: "fast trigger", trigger: () => "#fast" }
      ]

      const remote = async (query) => {
        return await new Promise((resolve) => {
          setTimeout(() => {
            return resolve(remoteActions);
          }, 100 * Math.random());
        });
      }

      /*
      const source2 = {
        category: "pull requests",
        request: (query) => "https://api.begreet.com?query=" + query
      }

      const source3 = async (query) => {
        const res = await fetch("https://31dgeh4x4m.execute-api.eu-west-1.amazonaws.com/hello?query=" + query)

        if(res.ok) {
          const { message } = await res.json();
          return message.hits.map(hit => ({
            title: "" + new Date().getTime() + hit.id,
            trigger: "/"
          }));
        } else {
          return [];
        }
      }
      */

      import { hotlight } from "./hotlight.esm.js";

      const hl = hotlight();
      hl.configure({
        initialQuery: "janne",
        sources: [source, remote]
      });
      hl.launch();
      hl.debug();
    </script>
  </head>
  <body>
    <hotlight-modal></hotlight-modal>
    <div style="height: 2000px; background: blue; width: 200px; margin: 0 auto;">content</div>
  </body>
</html>
